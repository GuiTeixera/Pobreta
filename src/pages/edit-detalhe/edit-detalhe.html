<ion-header>

  <ion-navbar color="dark">
    <ion-title style="text-align: center;">Novo Produto</ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>

<form [formGroup]="form">

  <ion-item>
    <ion-label>Categorias</ion-label>
      <ion-select formControlName="categoryKey" (ionChange)="getCategorias()" interface="popover">
      <ion-option value="" [selected]="true">Selecione</ion-option>
      <ion-option *ngFor="let categoria of categories | async" [value]="categoria.key">{{ categoria.nome }}</ion-option>
    </ion-select>
  </ion-item>


  <ion-item>
    <ion-label stacked>Descrição</ion-label>
    <ion-input type="text" formControlName="descricao"></ion-input>
  </ion-item>


  <ion-item *ngIf="!form.controls.descricao.valid && (form.controls.descricao.dirty || form.controls.descricao.touched)"
    color="danger">
    <div [hidden]="!form.controls.descricao.errors.required">
      O campo é obrigatório
    </div>
  </ion-item>

  <ion-item>
    <ion-label stacked>Quantidade</ion-label>
    <ion-input type="number" formControlName="quantidade"></ion-input>
  </ion-item>

  <ion-item *ngIf="!form.controls.quantidade.valid && (form.controls.quantidade.dirty || form.controls.quantidade.touched)"
    color="danger">
    <div [hidden]="!form.controls.quantidade.errors.required">
      O campo é obrigatório
    </div>
  </ion-item>


  <div padding>
    <button ion-button block type="submit" color="dark" [disabled]="!form.valid" (click)="onSubmit()" round>Salvar</button>
  </div>

</form>

</ion-content>
